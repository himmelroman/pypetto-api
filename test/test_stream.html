<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Test Stream</title>
</head>
<script>
    async function do_stream() {
        const response = await fetch(
            "https://pypetto-api.onrender.com/api/claims_stream",
            {
                method: "POST",
                headers: {
                    "Content-Type": "application/json",
                },
                body: JSON.stringify({"text": "This is some example input text", "lang": "en"})
            }
        );
        const reader = response.body.pipeThrough(new TextDecoderStream()).getReader();

        while (true) {
          const {value, done} = await reader.read();
          if (done) break;
          console.log('Received', value);
        }

        console.log('Response fully received');
    }
</script>
<body>
    <input type="button" onclick="do_stream()" value="Stream!"/>
    <textarea id="txt"></textarea>
</body>
</html>